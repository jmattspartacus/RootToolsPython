# list of all fields in the E19044 full dataset 
# mergedBeta Title: mergedBeta
# input_.fUniqueID Title: input_.fUniqueID
# input_.fBits Title: input_.fBits
# input_.event_number_ Title: input_.event_number_
# input_.file_name_ Title: input_.file_name_
# input_.external_ts_high_ Title: input_.external_ts_high_
# input_.external_ts_low_ Title: input_.external_ts_low_
# input_.rit_b1_.energy_ Title: input_.rit_b1_.energy_
# input_.rit_b1_.time_ Title: input_.rit_b1_.time_
# input_.rit_b2_.energy_ Title: input_.rit_b2_.energy_
# input_.rit_b2_.time_ Title: input_.rit_b2_.time_
# input_.fit_b1_.energy_ Title: input_.fit_b1_.energy_
# input_.fit_b1_.time_ Title: input_.fit_b1_.time_
# input_.fit_b2_.energy_ Title: input_.fit_b2_.energy_
# input_.fit_b2_.time_ Title: input_.fit_b2_.time_
# input_.dyn_single_.energy_ Title: input_.dyn_single_.energy_
# input_.dyn_single_.time_ Title: input_.dyn_single_.time_
# input_.high_gain_.pos_x_ Title: input_.high_gain_.pos_x_
# input_.high_gain_.pos_y_ Title: input_.high_gain_.pos_y_
# input_.high_gain_.valid_ Title: input_.high_gain_.valid_
# input_.high_gain_.qdc_ Title: input_.high_gain_.qdc_
# input_.high_gain_.energy_ Title: input_.high_gain_.energy_
# input_.high_gain_.time_ Title: input_.high_gain_.time_
# input_.high_gain_.energy_sum_ Title: input_.high_gain_.energy_sum_
# input_.high_gain_.xa_energy_ Title: input_.high_gain_.xa_energy_
# input_.high_gain_.xb_energy_ Title: input_.high_gain_.xb_energy_
# input_.high_gain_.ya_energy_ Title: input_.high_gain_.ya_energy_
# input_.high_gain_.yb_energy_ Title: input_.high_gain_.yb_energy_
# input_.high_gain_.xa_qdc_ Title: input_.high_gain_.xa_qdc_
# input_.high_gain_.xb_qdc_ Title: input_.high_gain_.xb_qdc_
# input_.high_gain_.ya_qdc_ Title: input_.high_gain_.ya_qdc_
# input_.high_gain_.yb_qdc_ Title: input_.high_gain_.yb_qdc_
# input_.low_gain_.pos_x_ Title: input_.low_gain_.pos_x_
# input_.low_gain_.pos_y_ Title: input_.low_gain_.pos_y_
# input_.low_gain_.valid_ Title: input_.low_gain_.valid_
# input_.low_gain_.qdc_ Title: input_.low_gain_.qdc_
# input_.low_gain_.energy_ Title: input_.low_gain_.energy_
# input_.low_gain_.time_ Title: input_.low_gain_.time_
# input_.low_gain_.energy_sum_ Title: input_.low_gain_.energy_sum_
# input_.low_gain_.xa_energy_ Title: input_.low_gain_.xa_energy_
# input_.low_gain_.xb_energy_ Title: input_.low_gain_.xb_energy_
# input_.low_gain_.ya_energy_ Title: input_.low_gain_.ya_energy_
# input_.low_gain_.yb_energy_ Title: input_.low_gain_.yb_energy_
# input_.low_gain_.xa_qdc_ Title: input_.low_gain_.xa_qdc_
# input_.low_gain_.xb_qdc_ Title: input_.low_gain_.xb_qdc_
# input_.low_gain_.ya_qdc_ Title: input_.low_gain_.ya_qdc_
# input_.low_gain_.yb_qdc_ Title: input_.low_gain_.yb_qdc_
# input_.pid_pin0_ Title: input_.pid_pin0_
# input_.pid_tac1_ Title: input_.pid_tac1_
# input_.pid_tof1_ Title: input_.pid_tof1_
# output_vec__ Title: output_vec__
# output_vec_.fUniqueID Title: fUniqueID[output_vec__]
# output_vec_.fBits Title: fBits[output_vec__]
# output_vec_.event_number_ Title: event_number_[output_vec__]
# output_vec_.file_name_ Title: file_name_[output_vec__]
# output_vec_.external_ts_high_ Title: external_ts_high_[output_vec__]
# output_vec_.external_ts_low_ Title: external_ts_low_[output_vec__]
# output_vec_.rit_b1_.energy_ Title: energy_[output_vec__]
# output_vec_.rit_b1_.time_ Title: time_[output_vec__]
# output_vec_.rit_b2_.energy_ Title: energy_[output_vec__]
# output_vec_.rit_b2_.time_ Title: time_[output_vec__]
# output_vec_.fit_b1_.energy_ Title: energy_[output_vec__]
# output_vec_.fit_b1_.time_ Title: time_[output_vec__]
# output_vec_.fit_b2_.energy_ Title: energy_[output_vec__]
# output_vec_.fit_b2_.time_ Title: time_[output_vec__]
# output_vec_.dyn_single_.energy_ Title: energy_[output_vec__]
# output_vec_.dyn_single_.time_ Title: time_[output_vec__]
# output_vec_.high_gain_.pos_x_ Title: pos_x_[output_vec__]
# output_vec_.high_gain_.pos_y_ Title: pos_y_[output_vec__]
# output_vec_.high_gain_.valid_ Title: valid_[output_vec__]
# output_vec_.high_gain_.qdc_ Title: qdc_[output_vec__]
# output_vec_.high_gain_.energy_ Title: energy_[output_vec__]
# output_vec_.high_gain_.time_ Title: time_[output_vec__]
# output_vec_.high_gain_.energy_sum_ Title: energy_sum_[output_vec__]
# output_vec_.high_gain_.xa_energy_ Title: xa_energy_[output_vec__]
# output_vec_.high_gain_.xb_energy_ Title: xb_energy_[output_vec__]
# output_vec_.high_gain_.ya_energy_ Title: ya_energy_[output_vec__]
# output_vec_.high_gain_.yb_energy_ Title: yb_energy_[output_vec__]
# output_vec_.high_gain_.xa_qdc_ Title: xa_qdc_[output_vec__]
# output_vec_.high_gain_.xb_qdc_ Title: xb_qdc_[output_vec__]
# output_vec_.high_gain_.ya_qdc_ Title: ya_qdc_[output_vec__]
# output_vec_.high_gain_.yb_qdc_ Title: yb_qdc_[output_vec__]
# output_vec_.low_gain_.pos_x_ Title: pos_x_[output_vec__]
# output_vec_.low_gain_.pos_y_ Title: pos_y_[output_vec__]
# output_vec_.low_gain_.valid_ Title: valid_[output_vec__]
# output_vec_.low_gain_.qdc_ Title: qdc_[output_vec__]
# output_vec_.low_gain_.energy_ Title: energy_[output_vec__]
# output_vec_.low_gain_.time_ Title: time_[output_vec__]
# output_vec_.low_gain_.energy_sum_ Title: energy_sum_[output_vec__]
# output_vec_.low_gain_.xa_energy_ Title: xa_energy_[output_vec__]
# output_vec_.low_gain_.xb_energy_ Title: xb_energy_[output_vec__]
# output_vec_.low_gain_.ya_energy_ Title: ya_energy_[output_vec__]
# output_vec_.low_gain_.yb_energy_ Title: yb_energy_[output_vec__]
# output_vec_.low_gain_.xa_qdc_ Title: xa_qdc_[output_vec__]
# output_vec_.low_gain_.xb_qdc_ Title: xb_qdc_[output_vec__]
# output_vec_.low_gain_.ya_qdc_ Title: ya_qdc_[output_vec__]
# output_vec_.low_gain_.yb_qdc_ Title: yb_qdc_[output_vec__]
# output_vec_.pid_pin0_ Title: pid_pin0_[output_vec__]
# output_vec_.pid_tac1_ Title: pid_tac1_[output_vec__]
# output_vec_.pid_tof1_ Title: pid_tof1_[output_vec__]
# bato_vec__ Title: bato_vec__
# bato_vec_.pQDCsums Title: pQDCsums[bato_vec__]
# bato_vec_.time Title: time[bato_vec__]
# bato_vec_.energy Title: energy[bato_vec__]
# bato_vec_.qdc Title: qdc[bato_vec__]
# bato_vec_.detNum Title: detNum[bato_vec__]
# clover_vec__ Title: clover_vec__
# clover_vec_.energy Title: energy[clover_vec__]
# clover_vec_.rawEnergy Title: rawEnergy[clover_vec__]
# clover_vec_.time Title: time[clover_vec__]
# clover_vec_.detNum Title: detNum[clover_vec__]
# clover_vec_.cloverNum Title: cloverNum[clover_vec__]
# clover_vec_.cloverHigh Title: cloverHigh[clover_vec__]
# vandle_vec__ Title: vandle_vec__
# vandle_vec_.barType Title: barType[vandle_vec__]
# vandle_vec_.tof Title: tof[vandle_vec__]
# vandle_vec_.corTof Title: corTof[vandle_vec__]
# vandle_vec_.qdcPos Title: qdcPos[vandle_vec__]
# vandle_vec_.qdc Title: qdc[vandle_vec__]
# vandle_vec_.barNum Title: barNum[vandle_vec__]
# vandle_vec_.tAvg Title: tAvg[vandle_vec__]
# vandle_vec_.tDiff Title: tDiff[vandle_vec__]
# vandle_vec_.wcTavg Title: wcTavg[vandle_vec__]
# vandle_vec_.wcTdiff Title: wcTdiff[vandle_vec__]
# vandle_vec_.sNum Title: sNum[vandle_vec__]
# vandle_vec_.vMulti Title: vMulti[vandle_vec__]
# vandle_vec_.sTime Title: sTime[vandle_vec__]
# vandle_vec_.sQdc Title: sQdc[vandle_vec__]


# Name of the tree in the merged root files
merged_tree_name                   = "OutputTree"

# clover time from the simple root files
simple_clover_corrected_time_field = "clover_T"

# clover energy from the simple root files
simple_clover_energy_field         = "clover_E"


# clover time for the larger data files
full_clover_corrected_time_field   = "clover_vec_.time"

# Clover energy for the larger data files
full_clover_energy_field           = "clover_vec_.energy"

# clover time relative to the implant
clover_relative_time               = "clover_T"
clover_addback_relative_time               = "cloverAB_T"
# clover energy
clover_energy         = "clover_E"
clover_addback_energy         = "cloverAB_E"

# Distance between the implantation and the detected beta
beta_correlation_radius_func       = "dr"
#beta_correlation_radius_func_old  = "(((output_vec_.low_gain_.pos_x_ - input_.high_gain_.pos_x_)**2 + (output_vec_.low_gain_.pos_y_ - input_.high_gain_.pos_y_)**2)**0.5)"

# Time from the master clock of the implantation
implant_time_absolute              = "output_vec_.low_gain_.time_"

# Time from the master clock of the beta decay
beta_decay_absolute_time           = "input_.high_gain_.time_"

# time of the beta decay relative to the implantation
beta_decay_relative_time           = "dT * 1e6"
# f"{beta_decay_absolute_time} - {implant_time_absolute}"

# time of the gamma event relative to the implantation
clover_time_absolute                = f"{clover_relative_time} - {beta_decay_relative_time} * 1e6"
clover_addback_time_absolute        = f"{clover_addback_relative_time} - {beta_decay_relative_time} * 1e6"
#f"({full_clover_corrected_time_field}-{implant_time_absolute})"

# gate the gamma based on the time of the decay
beta_gated_gamma                   = lambda addback: f"{clover_addback_relative_time if addback else clover_relative_time}"

beta_decay_energy                  = "betaEnergyLowGain" 